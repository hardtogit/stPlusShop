(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/upload-images"],{"039d":function(e,t,n){},"0d95":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n("a34a")),a=r(n("ebaf"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,i,a,r,u){try{var o=e[r](u),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(i,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function o(e){u(r,i,a,o,s,"next",e)}function s(e){u(r,i,a,o,s,"throw",e)}o(void 0)})}}var s={data:function(){return{imageList:[]}},props:{url:{type:String,value:""},count:{type:Number,value:4},length:{type:Number,value:50}},computed:{rduLength:function(){return this.length-this.imageList.length}},methods:{chooseImage:function(){var t=this;e.chooseImage({count:this.rduLength<this.count?this.rduLength:this.count,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var n=e.tempFilePaths;t.uploadFiles(n)}})},uploadFiles:function(){var t=o(i.default.mark(function t(n){var a;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.imageList.push({filePath:n[0],progress:0}),e.showLoading({title:"请稍后..",mask:!0}),a=null,t.prev=3,t.next=6,this.uploadImage(n[0]);case 6:a=t.sent,console.log(a),t.next=14;break;case 10:return t.prev=10,t.t0=t["catch"](3),console.log(t.t0),t.abrupt("return");case 14:return t.prev=14,e.hideLoading(),t.finish(14);case 17:a?(n.splice(0,1),this.imageList[this.imageList.length-1].src=a,n.length>0&&this.rduLength>0?this.uploadFiles(n):e.hideLoading()):(this.imageList.pop(),e.hideLoading(),e.showToast({title:"上传中出现问题，已终止上传",icon:"none",mask:!0,duration:2e3}));case 18:case"end":return t.stop()}},t,this,[[3,10,14,17]])}));function n(e){return t.apply(this,arguments)}return n}(),uploadImage:function(t){var n=this;return new Promise(function(i,r){var u={thumb_mode:1,fileSingleSizeLimit:10485760,fileSizeLimit:"10MB",originalName:"ceshi.jpg",token:"TwfyW3Xe1tblRSns91567764332116"};n.uploadTask=e.uploadFile({url:n.url||"".concat(a.default.apiUrl,"/jsp/api/grem/doUploadFile.jsp"),filePath:t,name:"file",formData:u,success:function(e){var t=JSON.parse(e.data),n=t.data;console.log("路劲",n[0].relativePath),i(n[0].relativePath)},fail:function(){r("网络链接错误")}}),n.uploadTask.onProgressUpdate(function(e){n.imageList[n.imageList.length-1].progress=e.progress})})},delImage:function(t){var n=this;e.showModal({content:"确定要放弃这张图片么？",success:function(e){e.confirm&&n.imageList.splice(t,1)}})},previewImage:function(t){var n=[];this.imageList.forEach(function(e){n.push(e.filePath)}),e.previewImage({current:n[t],urls:n,indicator:"number"})}}};t.default=s}).call(this,n("543d")["default"])},"2c34":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i})},"4bd8":function(e,t,n){"use strict";var i=n("039d"),a=n.n(i);a.a},"6ccb":function(e,t,n){"use strict";n.r(t);var i=n("2c34"),a=n("ab72");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("4bd8");var u,o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],u);t["default"]=s.exports},ab72:function(e,t,n){"use strict";n.r(t);var i=n("0d95"),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=a.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/upload-images-create-component',
    {
        'components/upload-images-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("6ccb"))
        })
    },
    [['components/upload-images-create-component']]
]);
