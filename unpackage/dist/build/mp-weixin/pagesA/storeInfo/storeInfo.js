(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesA/storeInfo/storeInfo"],{3056:function(e,t,n){"use strict";var o=n("93e6"),i=n.n(o);i.a},"5b1e":function(e,t,n){"use strict";n.r(t);var o=n("c7dd"),i=n.n(o);for(var c in o)"default"!==c&&function(e){n.d(t,e,(function(){return o[e]}))}(c);t["default"]=i.a},"93e6":function(e,t,n){},"98ac":function(e,t,n){"use strict";(function(e){n("ced0");o(n("66fd"));var t=o(n("cb6c"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},c7dd:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("ebaf");n("d112");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){n.e("components/mpvue-picker/mpvuePicker").then(function(){return resolve(n("91bf"))}.bind(null,n)).catch(n.oe)},a=function(){Promise.all([n.e("common/vendor"),n.e("components/upload-images")]).then(function(){return resolve(n("6ccb"))}.bind(null,n)).catch(n.oe)},u=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-editor/uni-editor")]).then(function(){return resolve(n("a59e"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("4a96"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/industry").then(function(){return resolve(n("b431"))}.bind(null,n)).catch(n.oe)},f={},m={components:{mpvuePicker:s,uploadImages:a,uniEditor:u,industry:l,uniPop:d},data:function(){return{ctx:this.$ctx,mode:"selector",deepLength:3,pickerValueDefault:[0,0,0],pickerValueValue:["210000","210400","210411"],pickerValueArray:f,pickerCity:"请选择所在城市",themeColor:"",pickerArray:f,ids:[],arr:[],form:{},showTextarea:!0,hideTextarea:!1,posterImg:[],industryEntity:null,address:"",addressName:"",addressObj:{}}},onLoad:function(t){var n=this,i=this;this.$getJson("/api/v2/vue/sqPlus/company/companyInfo.jsp",{data:JSON.stringify({companyId:t.companyId||202})},"POST",(function(t){console.log("企业信息==>",t.data.cjCompany),n.form=t.data.cjCompany,n.$getJson("/jsp/api/resources/ajaxGetIndustry.jsp",{},"POST",(function(e){e.data.industry.forEach((function(e){e.id==t.data.cjCompany.industryId&&(i.industryEntity=e)}))})),console.log("企业信息==>2",t),n.$refs.desc.editorCtx.setContents({html:(0,o.dealRich)(t.data.cjCompany.desc)}),e.pageScrollTo({scrollTop:0,duration:0});var c=t.data.cjCompany.license?t.data.cjCompany.license.split(","):[],r=t.data.cjCompany.certificate?t.data.cjCompany.certificate.split(","):[],s=t.data.cjCompany.logoPath?t.data.cjCompany.logoPath.split(","):[],a=t.data.cjCompany.introduceImg?t.data.cjCompany.introduceImg.split(","):[],u=t.data.cjCompany.descImgs?t.data.cjCompany.descImgs.split(","):[];c.forEach((function(e){console.log(e),n.$refs.license.imageList.push({src:e,filePath:n.ctx+e})})),r.forEach((function(e){console.log(e),n.$refs.certificate.imageList.push({src:e,filePath:n.ctx+e})})),s.forEach((function(e){console.log(e),n.$refs.logoPath.imageList.push({src:e,filePath:n.ctx+e})})),a.forEach((function(e){console.log(e),n.$refs.introduceImg.imageList.push({src:e,filePath:n.ctx+e})})),u.forEach((function(e){console.log(e),n.$refs.descImgs.imageList.push({src:e,filePath:n.ctx+e})})),null==n.form.posterImgArr?n.posterImg=[]:n.form.posterImgArr.forEach((function(e,t){""!=e&&n.posterImg.push(e)})),"企业名称待编辑"==n.form.name&&(n.form.name=""),n.form["companyId"]=n.form["id"],n.form["job"]=t.data.job,t.data.industryIds&&(n.ids=t.data.industryIds.split(",").map(Number)),delete n.form.cjUser}))},methods:{openOne:function(){this.$refs.popOne.open()},handleIndustryChange:function(e){this.industryEntity=e},submit:function(t){var n,i=this;this.form.provinceId=this.provinceId||this.form.provinceId,this.form.cityId=this.cityId||this.form.cityId,this.form.countyId=this.countyId||this.form.countyId,this.form.lng=this.lng,this.form.lat=this.lat,this.form.type=1,this.form.level=1,this.form.address=this.provinceId?(this.address+this.addressName).replace(this.addressObj.province+this.addressObj.city+this.addressObj.district,""):this.form.address,this.$refs.desc.editorCtx.getContents({success:function(t){console.log(t,i),n=t.html,i.form.license=i.$refs.license.imageList.map((function(e){return e.src})).join(","),i.form.certificate=i.$refs.certificate.imageList.map((function(e){return e.src})).join(","),i.form.logoPath=i.$refs.logoPath.imageList.map((function(e){return e.src})).join(","),i.form.introduceImg=i.$refs.introduceImg.imageList.map((function(e){return e.src})).join(","),i.form.descImgs=i.$refs.descImgs.imageList.map((function(e){return e.src})).join(","),i.form.desc=(0,o.unDealRich)(n),console.log("表单",i.form),i.$getJson("/api/v2/vue/sqPlus/company/editCompanyInfo.jsp",c({},i.form),"POST",(function(t){e.showToast({title:"保存成功",duration:1e3,success:function(){setTimeout((function(){e.navigateBack({})}),1e3)}})}))}})},onCancel:function(e){this.showTextarea=!this.showTextarea,this.hideTextarea=!this.hideTextarea},onChange:function(e){console.log(e)},addReturn:function(){e.navigateBack({})},chooseAddres:function(){var e=this;wx.getSetting({success:function(t){console.log(t),t.authSetting["scope.userLocation"]?wx.chooseLocation({success:function(t){console.log(t),e.addressName=t.name,e.address=t.address,e.lat=t.latitude,e.lng=t.longitude,e.transformLocation({latitude:t.latitude,longitude:t.longitude})}}):wx.authorize({scope:"scope.userLocation",success:function(){wx.chooseLocation({success:function(t){e.addressName=t.name,e.address=t.address,e.lat=t.latitude,e.lng=t.longitude,e.transformLocation({latitude:t.latitude,longitude:t.longitude})}})},fail:function(){wx.openSetting({success:function(e){}})}})}})},transformLocation:function(e){var t=this;this.$qqmapsdk.reverseGeocoder({location:e,success:function(e){t.provinceId=e.result.ad_info.adcode.slice(0,2)+"0000",t.cityId=e.result.ad_info.adcode.slice(0,4)+"00",t.countyId=e.result.ad_info.adcode,t.addressObj={city:e.result.address_component.city,district:e.result.address_component.district,nation:e.result.address_component.nation,province:e.result.address_component.province}},fail:function(e){console.error(e)},complete:function(e){console.log(e)}})}}};t.default=m}).call(this,n("543d")["default"])},c9ec:function(e,t,n){"use strict";var o={uniEditor:function(){return Promise.all([n.e("common/vendor"),n.e("components/uni-editor/uni-editor")]).then(n.bind(null,"a59e"))},uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"4a96"))}},i=function(){var e=this,t=e.$createElement;e._self._c},c=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o}))},cb6c:function(e,t,n){"use strict";n.r(t);var o=n("c9ec"),i=n("5b1e");for(var c in i)"default"!==c&&function(e){n.d(t,e,(function(){return i[e]}))}(c);n("3056");var r,s=n("f0c5"),a=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=a.exports}},[["98ac","common/runtime","common/vendor"]]]);