(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/product"],{"03dd":function(e,t,o){"use strict";o.r(t);var s=o("cbc2"),n=o("5dff");for(var i in n)"default"!==i&&function(e){o.d(t,e,function(){return n[e]})}(i);o("1f41");var a,c=o("f0c5"),r=Object(c["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);t["default"]=r.exports},"1f41":function(e,t,o){"use strict";var s=o("5073"),n=o.n(s);n.a},2734:function(e,t,o){"use strict";(function(e){o("ced0"),o("921b");s(o("66fd"));var t=s(o("03dd"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},5073:function(e,t,o){},"5dff":function(e,t,o){"use strict";o.r(t);var s=o("d666"),n=o.n(s);for(var i in s)"default"!==i&&function(e){o.d(t,e,function(){return s[e]})}(i);t["default"]=n.a},cbc2:function(e,t,o){"use strict";var s={"uni-popup":()=>o.e("components/uni-popup/uni-popup").then(o.bind(null,"4a96"))},n=function(){var e=this,t=e.$createElement;e._self._c},i=[];o.d(t,"b",function(){return n}),o.d(t,"c",function(){return i}),o.d(t,"a",function(){return s})},d666:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){return o.e("components/uniPop").then(o.bind(null,"33b1"))},n=function(){return o.e("components/uni-popup/uni-popup").then(o.bind(null,"4a96"))},i={components:{uniPop:s,uniPopup:n},data:function(){return{cartCount:"",specClass:"none",specSelected:[],productInfo:{},member:{},yddMember:e.getStorageSync("userInfo"),shareShow:!1,favorite:!1,posterShow:!1,url:this.$ctx,qrcodePaths:[],id:null,shareList:[],imgList:[],inviteCode:"",loginCode:"",mobile:e.getStorageSync("mobile"),desc:"",companyId:"",cheapPurchaseCompanyId:"",classification:"",specList:[{id:1,name:"尺寸"},{id:2,name:"颜色"}],specChildList:[{id:1,pid:1,name:"XS"},{id:2,pid:1,name:"S"},{id:3,pid:1,name:"M"},{id:4,pid:1,name:"L"},{id:5,pid:1,name:"XL"},{id:6,pid:1,name:"XXL"},{id:7,pid:2,name:"白色"},{id:8,pid:2,name:"珊瑚粉"},{id:9,pid:2,name:"草木绿"}]}},onShareAppMessage:function(e){return console.log("------------------------",this.productInfo.resources.smallBannerImgArr[0]),"button"===e.from&&console.log(e.target),{title:this.yddMember.realName+"邀请你购买"+this.productInfo.resources.name,path:"/pages/product/product?id="+this.id+"&inviteCode="+this.yddMember.inviterCode+"&companyId="+this.companyId+"&cheapPurchaseCompanyId="+this.cheapPurchaseCompanyId+"&classification="+this.classification,imageUrl:this.$ctx+this.productInfo.resources.smallBannerImgArr[0]}},onLoad:function(t){if(console.log(t),t.id&&(this.id=t.id),this.inviteCode=t.inviteCode,t.companyId&&(this.companyId=t.companyId,e.setStorageSync("companyId",this.companyId),console.log("this.companyId",this.companyId)),t.cheapPurchaseCompanyId&&(this.cheapPurchaseCompanyId=t.cheapPurchaseCompanyId,e.setStorageSync("cheapPurchaseCompanyId",this.cheapPurchaseCompanyId)),t.classification&&(this.classification=t.classification,e.setStorageSync("classification",this.classification)),t.scene){var o=decodeURIComponent(t.scene);console.log("-----------scene--------",o);var s=o.split("&");s.length>0&&(this.id=s[0]),s.length>1&&(this.inviteCode=s[1]),s.length>2&&(this.companyId=t.companyId,e.setStorageSync("companyId",s[2])),s.length>2&&(this.cheapPurchaseCompanyId=t.cheapPurchaseCompanyId,e.setStorageSync("cheapPurchaseCompanyId",s[3])),s.length>2&&(this.classification=t.classification,e.setStorageSync("classification",s[4]))}},onShow:function(){this.loadData(),this.getCarts(),this.login()},methods:{loadData:function(){var t=this,o={data:JSON.stringify({resourcesId:this.id,memberId:e.getStorageSync("userInfo").id})};this.$getJson("/api/v2/vue/ydd/index/resoucesInfo.jsp",o,"POST",function(e){console.log("----list------------",e),e.data&&(t.productInfo.resources=e.data.resources,t.productInfo.goods=e.data.goods,t.member=e.data.member,t.favorite=e.data.isCollection>0,t.desc='<div style="width:100%">',e.data.resources.imgArr.forEach(function(e){t.desc+='<img style="width:100%;display:block;" src="'+t.url+e+'" />'}),t.desc+="</div>")})},getCarts:function(){var t=this;if(e.getStorageSync("mobile")){var o={data:JSON.stringify({memberId:e.getStorageSync("userInfo").id})};this.$getJson("/api/v2/vue/ydd/cart/getCartNumber.jsp",o,"POST",function(e){console.log("----list------------",e),e.data&&(t.cartCount=e.data)})}},shareShowBtn:function(t){if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);this.shareShow=!this.shareShow,1==t&&this.getQrcode()},posterShowBtn:function(){this.posterShow=!this.posterShow},toggleSpec:function(){var e=this;"show"===this.specClass?(this.specClass="hide",setTimeout(function(){e.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(e,t){var o=this,s=this.specChildList;s.forEach(function(e){e.pid===t&&o.$set(e,"selected",!1)}),this.$set(s[e],"selected",!0),this.specSelected=[],s.forEach(function(e){!0===e.selected&&o.specSelected.push(e)})},getQrcode:function(){var t=this;console.log("sssssss-------------",this.id+"&"+this.yddMember.inviterCode+"&"+e.getStorageSync("companyId")+"&"+e.getStorageSync("cheapPurchaseCompanyId")+"&"+e.getStorageSync("classification"));var o={data:JSON.stringify({page:"pages/product/product",scene:this.id+"&"+this.yddMember.inviterCode+"&"+e.getStorageSync("companyId")+"&"+e.getStorageSync("cheapPurchaseCompanyId")+"&"+e.getStorageSync("classification")})};this.$getJson("/api/v2/vue/stPlusShop/common/getQrcode.jsp",o,"POST",function(e){console.log("----list------------",e),e.data&&(t.qrcodePaths=[],t.qrcodePaths[0]=t.url+e.data)})},saveQrcode:function(t){var o=this;1==t?(o.qrcodePaths=[],this.productInfo.resources.smallBannerImgArr.forEach(function(e){o.qrcodePaths.push(o.url+e)})):2==t&&(o.qrcodePaths=[],this.productInfo.resources.imgArr.forEach(function(e){o.qrcodePaths.push(o.url+e)})),e.authorize({scope:"scope.writePhotosAlbum",success:function(){}}),e.previewImage({urls:this.qrcodePaths,longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log("errerrerr",e)},complete:function(e){console.log("eeee",e)}}})},toFavorite:function(){if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);this.favorite=!this.favorite;var t=0,o="";1==this.favorite?(t=1,o="收藏成功"):(t=0,o="取消收藏成功");var s={data:JSON.stringify({id:this.id,memberId:e.getStorageSync("userInfo").id,isCollection:t})};this.$getJson("/api/v2/vue/findingSomeone/do/doCollectResource.jsp",s,"POST",function(t){console.log("----res------------",t),1==t.data?e.showToast({title:o,icon:"none"}):e.showToast({title:t.message,icon:"none"})})},buy:function(){if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);var t=[],o={samllCoverImg:this.productInfo.resources.samllCoverImg,name:this.productInfo.resources.name};t.push({goods:this.productInfo.goods,resource:o,number:1}),e.navigateTo({url:"/pages/order/createOrder?data=".concat(JSON.stringify({goodsData:t,type:1,inviteCode:this.inviteCode,cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId")}))})},addCart:function(){var t=this;if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);var o={data:JSON.stringify({goodsId:this.productInfo.goods.id,memberId:e.getStorageSync("userInfo").id,cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId")})};this.$getJson("/api/v2/vue/ydd/cart/addCart.jsp",o,"POST",function(o){console.log("----res------------",o),1==o.data?(e.showToast({title:"加入成功",icon:"none"}),t.cartCount+=1):e.showToast({title:o.message,icon:"none"})})},stopPrevent:function(){},login:function(){var e=this;this.mobile||wx.login({success:function(t){console.info("res",t),e.loginCode=t.code,e.$refs.uniPop.show({title:"登录",content:"是否同意获取手机号？",shade:!0,shadeClose:!0,time:5,anim:"fadeIn",isVisible:!0,position:"bottom",loginCode:t.code,isUrl:!1})}})},childClick:function(t){this.yddMember=t,console.log("denglu:-----",t),e.setStorageSync("userInfo",t),this.mobile=t.mobile,this.$refs.popup.close(),this.loadData(),this.getCarts()}}};t.default=i}).call(this,o("543d")["default"])}},[["2734","common/runtime","common/vendor"]]]);