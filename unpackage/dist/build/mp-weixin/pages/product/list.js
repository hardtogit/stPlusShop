(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/list"],{"030e":function(e,t,n){"use strict";n.r(t);var o=n("49ad"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},"1bf2":function(e,t,n){},"49ad":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("4795"));function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,o,i,a,r){try{var s=e[a](r),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(o,i)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var r=e.apply(t,n);function s(e){a(r,o,i,s,c,"next",e)}function c(e){a(r,o,i,s,c,"throw",e)}s(void 0)}))}}var s=function(){n.e("components/uni-load-more/uni-load-more").then(function(){return resolve(n("b781"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/uniPop").then(function(){return resolve(n("33b1"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/uni-popup/uni-popup").then(function(){return resolve(n("4a96"))}.bind(null,n)).catch(n.oe)},d={components:{uniLoadMore:s,uniPop:c,uniPopup:u},data:function(){return{cateMaskState:0,headerPosition:"fixed",headerTop:"0px",loadingType:"more",filterIndex:0,priceOrder:0,goodsList:[],url:this.$ctx,pageNumber:1,likeTitle:"",twoIndustryId:null,mobile:e.getStorageSync("mobile"),flist:[],slist:[],companyId:e.getStorageSync("companyId"),cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId"),classification:e.getStorageSync("classification")}},onLoad:function(e){this.likeTitle=e.likeTitle,this.twoIndustryId=e.twoIndustryId,this.loadData(),this.loadIndustry()},onShow:function(){this.login()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onPullDownRefresh:function(){this.loadData("refresh")},onReachBottom:function(){this.loadData()},methods:{loadData:function(){var t=arguments,n=this;return r(o.default.mark((function i(){var a,r,s;return o.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=t.length>0&&void 0!==t[0]?t[0]:"add",r=t.length>1?t[1]:void 0,"add"!==a){o.next=8;break}if("nomore"!==n.loadingType){o.next=5;break}return o.abrupt("return");case 5:n.loadingType="loading",o.next=10;break;case 8:n.loadingType="more",n.pageNumber=1;case 10:s={data:JSON.stringify({pageNumber:n.pageNumber,likeTitle:n.likeTitle,twoIndustryId:n.twoIndustryId})},n.$getJson("/api/v2/vue/ydd/index/resList.jsp",s,"POST",(function(t){console.log("----list------------",t),t.data&&(1==n.pageNumber?n.goodsList=t.data:n.goodsList=n.goodsList.concat(t.data),n.pageNumber+=1,n.loadingType=t.data.length<8?"nomore":"more","refresh"===a&&(1==r?e.hideLoading():e.stopPullDownRefresh()))}));case 12:case"end":return o.stop()}}),i)})))()},loadIndustry:function(){var e=this;return r(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$getJson("/api/v2/vue/ydd/common/getIndustry.jsp",{},"POST",(function(t){console.log("----getIndustry------------",t),t.data.list.forEach((function(t){1==t.level?(t.show="+",e.flist.push(t)):(t.checked=!1,e.slist.push(t))}))}));case 1:case"end":return t.stop()}}),t)})))()},showChild:function(e){e.show="+"==e.show?"-":"+",this.slist.forEach((function(t){t.parentId==e.id&&(0==t.checked?t.checked=!0:t.checked=!1)}))},tabClick:function(t){this.filterIndex===t&&2!==t||(this.filterIndex=t,this.priceOrder=2===t?1===this.priceOrder?2:1:0,e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"}))},toggleCateMask:function(e){var t=this,n="show"===e?10:300,o="show"===e?1:0;this.cateMaskState=2,setTimeout((function(){t.cateMaskState=o}),n)},changeCate:function(t){this.twoIndustryId=t.id,this.toggleCateMask(),e.pageScrollTo({duration:300,scrollTop:0}),this.loadData("refresh",1),e.showLoading({title:"正在加载"})},navToDetailPage:function(t){var n=t.resource.id;e.navigateTo({url:"/pages/product/product?id=".concat(n)+"&companyId="+this.companyId+"&cheapPurchaseCompanyId="+this.cheapPurchaseCompanyId+"&classification="+this.classification})},stopPrevent:function(){},addCart:function(t){if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);var n={data:JSON.stringify({goodsId:t.goods.id,memberId:e.getStorageSync("userInfo").id,cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId")})};this.$getJson("/api/v2/vue/ydd/cart/addCart.jsp",n,"POST",(function(t){console.log("----res------------",t),e.switchTab({url:"/pages/cart/cart"})}))},login:function(){var e=this;this.mobile||wx.login({success:function(t){console.info("res",t),e.loginCode=t.code,e.$refs.uniPop.show({title:"登录",content:"是否同意获取手机号？",shade:!0,shadeClose:!0,time:5,anim:"fadeIn",isVisible:!0,position:"bottom",loginCode:t.code,isUrl:!1})}})},childClick:function(e){1==e?this.$refs.popup.close():(this.mobile=e.mobile,this.$refs.popup.close())}}};t.default=d}).call(this,n("543d")["default"])},e2d1:function(e,t,n){"use strict";var o={uniPopup:function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"4a96"))},uniLoadMore:function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"b781"))}},i=function(){var e=this,t=e.$createElement;e._self._c},a=[];n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}))},e40e:function(e,t,n){"use strict";(function(e){n("ced0");o(n("66fd"));var t=o(n("ffbd"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},f45d:function(e,t,n){"use strict";var o=n("1bf2"),i=n.n(o);i.a},ffbd:function(e,t,n){"use strict";n.r(t);var o=n("e2d1"),i=n("030e");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("f45d");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=c.exports}},[["e40e","common/runtime","common/vendor"]]]);