(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"02e0":function(e,n,t){"use strict";(function(e){t("ced0"),t("921b");o(t("66fd"));var n=o(t("a44f"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},2894:function(e,n,t){"use strict";var o={"uni-popup":()=>t.e("components/uni-popup/uni-popup").then(t.bind(null,"4a96")),"uni-load-more":()=>t.e("components/uni-load-more/uni-load-more").then(t.bind(null,"b781"))},a=function(){var e=this,n=e.$createElement;e._self._c},i=[];t.d(n,"b",function(){return a}),t.d(n,"c",function(){return i}),t.d(n,"a",function(){return o})},3353:function(e,n,t){"use strict";t.r(n);var o=t("af95"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,function(){return o[e]})}(i);n["default"]=a.a},5666:function(e,n,t){},a435:function(e,n,t){"use strict";var o=t("5666"),a=t.n(o);a.a},a44f:function(e,n,t){"use strict";t.r(n);var o=t("2894"),a=t("3353");for(var i in a)"default"!==i&&function(e){t.d(n,e,function(){return a[e]})}(i);t("a435");var s,r=t("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=c.exports},af95:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(t("a34a"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,o,a,i,s){try{var r=e[i](s),c=r.value}catch(u){return void t(u)}r.done?n(c):Promise.resolve(c).then(o,a)}function s(e){return function(){var n=this,t=arguments;return new Promise(function(o,a){var s=e.apply(n,t);function r(e){i(s,o,a,r,c,"next",e)}function c(e){i(s,o,a,r,c,"throw",e)}r(void 0)})}}var r=function(){return t.e("components/uniPop").then(t.bind(null,"33b1"))},c=function(){return t.e("components/uni-popup/uni-popup").then(t.bind(null,"4a96"))},u=function(){return t.e("components/uni-load-more/uni-load-more").then(t.bind(null,"b781"))},d={components:{uniLoadMore:u,uniPop:r,uniPopup:c},data:function(){return{titleNViewBackground:"rgb(205, 215, 218)",posterImgCurrent:0,headerPosition:"fixed",posterImgLength:0,posterImgList:[],goodsList:[],url:this.$ctx,pageNumber:1,loadingType:"more",companyId:e.getStorageSync("companyId"),cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId"),classification:e.getStorageSync("classification")}},onPullDownRefresh:function(){this.loadDataTop(),this.pageNumber=1,this.loadDataList("refresh")},onLoad:function(){console.log("this.companyId",e.getStorageSync("companyId")),this.loadDataTop(),this.loadDataList()},onPageScroll:function(e){e.scrollTop>=0?this.headerPosition="fixed":this.headerPosition="absolute"},onReachBottom:function(){this.loadDataList()},methods:{addCart:function(n){var t=this;if(!e.getStorageSync("mobile"))return this.login(),this.$refs.popup.open(),void this.$refs.popup.clickClose(!0);var o={data:JSON.stringify({goodsId:n.id,memberId:e.getStorageSync("userInfo").id,cheapPurchaseCompanyId:e.getStorageSync("cheapPurchaseCompanyId")})};this.$getJson("/api/v2/vue/ydd/cart/addCart.jsp",o,"POST",function(n){console.log("----res------------",n),1==n.data?(e.showToast({title:"加入成功",icon:"none"}),t.cartCount+=1):e.showToast({title:n.message,icon:"none"})})},login:function(){var e=this;this.mobile||wx.login({success:function(n){console.info("res",n),e.loginCode=n.code,e.$refs.uniPop.show({title:"登录",content:"是否同意获取手机号？",shade:!0,shadeClose:!0,time:5,anim:"fadeIn",isVisible:!0,position:"bottom",loginCode:n.code,isUrl:!1})}})},childClick:function(n){this.yddMember=n,console.log("denglu:-----",n),e.setStorageSync("userInfo",n),this.mobile=n.mobile,this.$refs.popup.close()},loadDataTop:function(){var n=s(o.default.mark(function n(){var t,a=this;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:t={data:JSON.stringify({companyId:e.getStorageSync("companyId"),mini:"mini"})},this.$getJson("/api/v2/vue/ydd/index/topResList.jsp",t,"POST",function(e){console.log("----topList------------",e),e.data&&(a.posterImgLength=e.data.length,a.posterImgList=e.data)});case 2:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),loadDataList:function(){var n=s(o.default.mark(function n(){var t,a,i,s=this,r=arguments;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:"add",r.length>1?r[1]:void 0,"add"!==t){n.next=8;break}if("nomore"!==this.loadingType){n.next=5;break}return n.abrupt("return");case 5:this.loadingType="loading",n.next=9;break;case 8:this.loadingType="more";case 9:a="/api/v2/vue/ydd/index/resList.jsp",i={data:JSON.stringify({pageNumber:this.pageNumber,companyId:e.getStorageSync("companyId")})},0!=e.getStorageSync("companyId")&&""!=e.getStorageSync("companyId")&&null!=e.getStorageSync("companyId")||0!=e.getStorageSync("classification")&&""!=e.getStorageSync("classification")&&(i={data:JSON.stringify({pageNumber:this.pageNumber,companyId:e.getStorageSync("cheapPurchaseCompanyId"),classification:e.getStorageSync("classification")})},a="/api/v2/vue/sqPlus/resources/cheapPurchaseList.jsp"),this.$getJson(a,i,"POST",function(n){if(console.log("----list------------",n),n.data){var o=n.data;"/api/v2/vue/sqPlus/resources/cheapPurchaseList.jsp"==a&&(o=n.data.yddResourcess),1==s.pageNumber?s.goodsList=o:s.goodsList=s.goodsList.concat(o),s.pageNumber+=1,s.loadingType=o.length<8?"nomore":"more","refresh"===t&&e.stopPullDownRefresh()}});case 13:case"end":return n.stop()}},n,this)}));function t(){return n.apply(this,arguments)}return t}(),imgChange:function(e){console.log("e---------------------------",e);var n=e.detail.current;this.posterImgCurrent=n},navToDetailPage:function(n){var t=n.resource.id;e.navigateTo({url:"/pages/product/product?id=".concat(t)+"&companyId="+this.companyId+"&cheapPurchaseCompanyId="+this.cheapPurchaseCompanyId+"&classification="+this.classification})},wxSearchBtn:function(){e.navigateTo({url:"/pages/search/search"})}}};n.default=d}).call(this,t("543d")["default"])}},[["02e0","common/runtime","common/vendor"]]]);